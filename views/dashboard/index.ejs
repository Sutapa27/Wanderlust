<% layout("/layouts/boilerplate") %>
<link rel="stylesheet" href="/css/dashboard.css" />

<div class="container mt-4">
  <div class="row">
    <div class="col-12 col-lg-10 offset-lg-1 col-xl-8 offset-xl-2">
      <!-- Back Arrow & Title -->
      <div class="mb-3">
        <a
          href="/listings"
          class="text-dark me-2"
          style="text-decoration: none"
        >
          <i class="fa-solid fa-arrow-left" style="font-size: 1.3rem"></i>
        </a>
        <span class="fs-4 fw-semibold">Dashboard</span>
      </div>

      <!-- User Info Card -->
      <div class="card shadow-sm mb-3">
        <div class="card-body p-3 p-md-4">
          <div class="d-flex align-items-center mb-3">
            <div
              class="bg-dark text-white rounded-circle d-flex align-items-center justify-content-center me-3 profile-circle flex-shrink-0"
            >
              <i class="fa-solid fa-user"></i>
            </div>
            <div style="min-width: 0">
              <h5 class="mb-1" style="font-size: 1.1rem">
                <%= user.username %>
              </h5>
              <p class="text-muted mb-0" style="font-size: 0.8rem">
                Member since <%= user.createdAt ? new
                Date(user.createdAt).toLocaleDateString('en-US', { month:
                'short', year: 'numeric' }) : new
                Date().toLocaleDateString('en-US', { month: 'short', year:
                'numeric' }) %>
              </p>
            </div>
          </div>

          <hr class="my-2" />

          <h6 class="mb-2 fw-semibold" style="font-size: 0.95rem">
            Contact Details
          </h6>

          <div class="info-card">
            <div class="row">
              <div class="col-12 col-sm-6">
                <div class="d-flex align-items-start">
                  <strong class="me-2 contact-label" style="min-width: 50px"
                    >Email:</strong
                  >
                  <span style="font-size: 0.8rem; word-break: break-all"
                    ><%= user.email %></span
                  >
                </div>
              </div>

              <div class="col-12 col-sm-6">
                <div class="d-flex align-items-start">
                  <strong class="me-2 contact-label" style="min-width: 70px"
                    >Username:</strong
                  >
                  <span style="font-size: 0.85rem"><%= user.username %></span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Statistics Cards -->
      <div class="row g-2 g-md-3 mb-3">
        <% if(listingsCount > 0) { %>
        <div class="col-4">
          <div class="card text-center shadow-sm stat-card">
            <div class="card-body p-2 p-md-3">
              <h4 class="text-primary mb-1 fs-5 fs-md-3">
                <%= listingsCount %>
              </h4>
              <p class="mb-0 small">Listings</p>
            </div>
          </div>
        </div>
        <% } %>

        <div class="col-4">
          <div class="card text-center shadow-sm stat-card">
            <div class="card-body p-2 p-md-3">
              <h4 class="text-success mb-1 fs-5 fs-md-3">
                <%= bookingsCount %>
              </h4>
              <p class="mb-0 small">Bookings</p>
            </div>
          </div>
        </div>

        <div class="col-4">
          <div class="card text-center shadow-sm stat-card">
            <div class="card-body p-2 p-md-3">
              <h4 class="text-warning mb-1 fs-5 fs-md-3">
                <%= wishlistCount %>
              </h4>
              <p class="mb-0 small">Wishlist</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Quick Actions -->
      <div class="card shadow-sm mb-3">
        <div class="card-body p-3">
          <h6 class="mb-3 fw-semibold">Quick Actions</h6>

          <div class="d-grid gap-2">
            <% if(listingsCount > 0) { %>
            <a
              href="/dashboard/my-listings"
              class="btn btn-outline-dark btn-sm py-2"
            >
              <i class="fa-solid fa-list me-2"></i>View Your Listings
            </a>
            <% } %>
            <a
              href="/listings/new?from=dashboard"
              class="btn btn-outline-dark btn-sm py-2"
            >
              <i class="fa-solid fa-plus me-2"></i>Host Your Property
            </a>
            <a
              href="/wishlist?from=dashboard"
              class="btn btn-outline-dark btn-sm py-2"
            >
              <i class="fa-solid fa-heart me-2"></i>Your Wishlist
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
