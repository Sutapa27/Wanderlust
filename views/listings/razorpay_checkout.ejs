<% layout("/layouts/boilerplate") %>

<div class="container mt-5 d-flex justify-content-center">
  <div class="col-10 col-md-6">
    <!-- Back Button -->
    <a
      href="/listings/<%= listing._id %>"
      class="text-dark"
      style="text-decoration: none"
    >
      <i class="bi bi-arrow-left-circle-fill" style="font-size: 1.8rem"></i>
    </a>
    <!-- Payment Card -->
    <div class="card shadow-lg border-0 mt-3" style="border-radius: 1rem">
      <div class="card-body p-4">
        <h3 class="mb-3 text-center">Complete Your Payment</h3>
        <p class="text-center text-muted">
          <strong><%= listing.title %></strong>
        </p>
        <!-- Price Breakdown -->
        <div class="mt-4">
          <div class="d-flex justify-content-between mb-2">
            <span>Base Price:</span>
            <span>₹<%= basePrice.toLocaleString("en-IN") %></span>
          </div>
          <div class="d-flex justify-content-between mb-2">
            <span>GST (18%):</span>
            <span>₹<%= gstAmount.toFixed(2).toLocaleString("en-IN") %></span>
          </div>
          <hr />
          <div class="d-flex justify-content-between">
            <span class="fw-semibold fs-5">Total Amount:</span>
            <span class="fw-bold fs-4 text-success"
              >₹<%= finalPrice.toFixed(2).toLocaleString("en-IN") %></span
            >
          </div>
        </div>
        <hr />
        <!-- Payment Button -->
        <button
          id="payBtn"
          class="btn btn-dark w-100 py-2"
          style="border-radius: 0.6rem; font-size: 1.1rem"
        >
          <i class="bi bi-wallet2 me-2"></i> Pay ₹<%=
          finalPrice.toFixed(2).toLocaleString("en-IN") %>
        </button>
      </div>
    </div>
  </div>
</div>

<script src="https://checkout.razorpay.com/v1/checkout.js"></script>

<script src="/js/razorpay.js"></script>
